# FK 설정하기

![](https://github.com/MinsoftK/TIL/blob/master/SQL/image/fk.png?raw=true)


```sql
insert into 자동차구매고객
values(1,1,'20210610', 100000)

select * from 자동차구매고객
select * from customer where customerid = 1
select * from car where carid = 1

insert into 자동차구매고객
values(18, 10, '20210610', 100000)

-- 자동차구매고객에는 추가가 됐는데 도메인의 범위를 벗어난 오류
-- (Customer는 customerId가 17까지만 존재한다.)
-- 어떻게 해결해야하나?
delete 자동차구매고객 where salesId=2


-- 자동차구매고객에서 customerid가 Customer의 customerid 도메인이라는 것을 
-- 선언해줘야 한다.
-- 기본키 외래키 설정으로 관계를 설정해준다.
-- 열쇠쪽이 1인 1:n 관계이다.
```
<br/>

* 관계설정후 도메인 범위를 벗어난 아래 SQL문을 그대로 실행했을때 FK제약조건을 결과문을 확인할 수 있다.
```sql
insert into 자동차구매고객
values(18, 10, '20210610', 100000)
```
![](https://github.com/MinsoftK/TIL/blob/master/SQL/image/fk2.png?raw=true)

<br/>
<br/>
```sql
insert into 자동차구매고객
values(9, 10, '20210610', 100000)
--이도 마찬가지로 도메인에서의 값이 없기때문에 부모없는 자식이 태어남.

insert into 자동차구매고객
values(9, 5, '20210610', 100000)
```
